{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\marci\\\\Desktop\\\\alert\\\\frontend\\\\src\\\\pages\\\\dashboard\\\\dashboard.js\";\nimport React, { useEffect, useState } from 'react';\nimport { isAuthenticated, getToken } from \"../../services/auth\";\nimport { Link } from 'react-router-dom';\nimport api from '../../services/api.js';\nimport $ from \"jquery\";\nexport default function Dashboard({\n  history\n}) {\n  useEffect(() => {\n    if (!isAuthenticated()) {\n      history.push('/login');\n    }\n  }, []);\n  const [alerts, setAlerts] = useState([]);\n  const [userLogged, setUserLogged] = useState([]);\n  useEffect(() => {\n    async function loadAlerts() {\n      const response = await api.get('/allAlerts'); //console.log(response);\n\n      setAlerts(response.data.alerts);\n    }\n\n    loadAlerts();\n\n    async function loadUserLogged() {\n      const response = await api.get('/user', {\n        headers: {\n          user_id: getToken()\n        }\n      });\n      setUserLogged(response.data);\n    }\n\n    loadUserLogged();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }, \"Logado como: \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 52\n    }\n  }, userLogged.name), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 77\n    }\n  }, \"(\", userLogged.email, \")\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/cadastro\",\n    to: \"/dashboard/newAlert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 40\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fa fa-plus-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 86\n    }\n  })), \" \", /*#__PURE__*/React.createElement(\"i\", {\n    onClick: \"clickLogout()\",\n    class: \"fa fa-power-off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 127\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"box_alerts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }, \"Alertas \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 48\n    }\n  }, \"(total de \", alerts.length, \" alertas)\")), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 29\n    }\n  }, \"T\\xEDtutlo\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 29\n    }\n  }, \"Conte\\xFAdo\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 29\n    }\n  }, \"Data\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 29\n    }\n  }, \"Autor\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, alerts.map(alert => /*#__PURE__*/React.createElement(\"tr\", {\n    key: alert._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 33\n    }\n  }, alert.title), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 33\n    }\n  }, alert.text), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 33\n    }\n  }, alert.date_exhibition), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  }, alert.user))))))));\n}","map":{"version":3,"sources":["C:/Users/marci/Desktop/alert/frontend/src/pages/dashboard/dashboard.js"],"names":["React","useEffect","useState","isAuthenticated","getToken","Link","api","$","Dashboard","history","push","alerts","setAlerts","userLogged","setUserLogged","loadAlerts","response","get","data","loadUserLogged","headers","user_id","name","email","length","map","alert","_id","title","text","date_exhibition","user"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport { isAuthenticated, getToken } from \"../../services/auth\";\r\nimport { Link } from 'react-router-dom'\r\nimport api from '../../services/api.js';\r\nimport $ from \"jquery\";\r\n\r\nexport default function Dashboard({history}) {\r\n\r\n    useEffect(() => {\r\n        if(!isAuthenticated()){\r\n            history.push('/login');\r\n        }\r\n    }, []);\r\n\r\n    const [alerts, setAlerts] = useState([]);\r\n    const [userLogged, setUserLogged] = useState([]);\r\n\r\n    useEffect(() => {\r\n        async function loadAlerts(){\r\n            const response = await api.get('/allAlerts');\r\n            //console.log(response);\r\n            setAlerts(response.data.alerts);\r\n        }\r\n\r\n        loadAlerts();\r\n\r\n        async function loadUserLogged(){\r\n            const response = await api.get('/user', { \r\n                headers: {\r\n                    user_id: getToken(),\r\n                } \r\n            });\r\n            setUserLogged(response.data);\r\n        }\r\n\r\n        loadUserLogged();\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <>\r\n        <div className=\"container\">\r\n            <div className=\"header\">\r\n                <div className=\"left\">Logado como: <b>{userLogged.name}</b> <span>({userLogged.email})</span></div>\r\n                <div className=\"right\"><Link to=\"/cadastro\" to=\"/dashboard/newAlert\"><i class=\"fa fa-plus-circle\"></i></Link> <i onClick=\"clickLogout()\" class=\"fa fa-power-off\"></i></div>\r\n            </div>\r\n            <div className=\"box_alerts\">\r\n                <div className=\"title\">Alertas <span>(total de {alerts.length} alertas)</span></div>\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Títutlo</th>\r\n                            <th>Conteúdo</th>\r\n                            <th>Data</th>\r\n                            <th>Autor</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {alerts.map(alert => (\r\n                            <tr key={alert._id}>\r\n                                <td>{alert.title}</td>\r\n                                <td>{alert.text}</td>\r\n                                <td>{alert.date_exhibition}</td>\r\n                                <td>{alert.user}</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n        </>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}